CREATE DATABASE sqooptest
CREATE TABLE `cities` (
  `id` INTEGER UNSIGNED NOT NULL,
  `country` VARCHAR(50),
  `city` VARCHAR(150),
  PRIMARY KEY (`id`)
);

INSERT INTO `cities`(`id`, `country`, `city`) VALUES (1, "USA", "Palo Alto");
INSERT INTO `cities`(`id`, `country`, `city`) VALUES (2, "Czech Republic", "Brno");
INSERT INTO `cities`(`id`, `country`, `city`) VALUES (3, "USA", "Sunnyvale");

sqoop import --connect jdbc:mysql://master/sqooptest --username hive -P --table cities
sqoop import --connect jdbc:mysql://master/sqooptest --username hive -P --table cities --target-dir target_cities
sqoop import --connect jdbc:mysql://master/sqooptest --username hive -P --table cities --warehouse-dir sqoop_warehouse
sqoop import --connect jdbc:mysql://master/sqooptest --username hive -P --table cities --columns id,city --target-dir citiesNoCountry
sqoop import --connect jdbc:mysql://master/sqooptest --username hive -P --table cities --where 'country="USA"' --target-dir USA_cities



insert into cities values (4,"Italy","Milan"),(5,"Italy","Rome");


sqoop import --connect jdbc:mysql://master/sqooptest --username hive -P --table cities --incremental append --check-column id --last-value 3


create table sparseTable (id int primary key, c1 varchar(255), c2 int);
insert into sparseTable values (1,"v1",NULL),(2,NULL,1),(3,"v1",1),(4,NULL,NULL);


sqoop-import --connect jdbc:mysql://master/sqooptest --username hive -P --table sparseTable --target-dir emptyString --null-string ''
sqoop-import --connect jdbc:mysql://master/sqooptest --username hive -P --table sparseTable --target-dir nullvalues --null-string '' --null-non-string '-1'


create table department(dep_id int primary key, dep_name varchar(255))
create table course(course_id int primary key, course_name varchar(255),dep int, foreign key (dep) references department(dep_id))
create table student(id int primary key, name varchar(255), surname varchar(255), course int, foreign key (course) references course(course_id));
insert into department values (1,"DEMACS");
insert into course values (1,"Computer Science",1),(2,"Mathematics", 1);
insert into student values (1,"n1", "s1",1),(2,"n2", "s2",2),(3,"n1", "s2",1),(4,"n2", "s1",2);


sqoop-import --connect jdbc:mysql://master/sqooptest --username hive -P --query 
	'select id,name,surname,course_name,dep_name from student join (course join department on dep=dep_id) on course = course_id where $CONDITIONS' 
	--split-by id --target-dir allStudents
sqoop-import --connect jdbc:mysql://master/sqooptest --username hive -P --query 
	'select id,name,surname,course_name,dep_name from student join (course join department on dep=dep_id) on course = course_id 
	where $CONDITIONS and course_name="Computer Science"' 
	--split-by id --target-dir allStudentsCS

sqoop import-all-tables jdbc:mysql://master/sqooptest --username hive -P --warehouse-dir distributed_sqoop_test --exclude-table department 


Data:
	1,n1
	2,n2

hdfs dfs -mkdir t_fold
hdfs dfs -put data t_fold  
create table table_(id int primary key, name varchar(255));
sqoop-export --connect jdbc:mysql://master/sqooptest --username hive -P --table table_ --export-dir t_fold  

-Dsqoop.export.records.per.statement 
-Dsqoop.export.statements.per.transaction

Data2
	1,c1
	2,c2
	3,c3
hdfs dfs -put data2 t_fold
sqoop-export --connect jdbc:mysql://master/sqooptest --username hive -P --table table_ --export-dir t_fold --update-key id  

sqoop-export --connect jdbc:mysql://master/sqooptest --username hive -P --table table_ --export-dir t_fold --update-key id --update-mode allowinsert

create table larger_table (id int primary key, name varchar(255), nn varchar(255));
sqoop-export --connect jdbc:mysql://master/sqooptest --username hive -P --table larger_table --export-dir t_fold --columns id,nn


sqoop-import --connect jdbc:mysql://master/sqooptest --username hive -P --table cities --hive-import 
sqoop-import --connect jdbc:mysql://master/sqooptest --username hive -P --table cities --hive-import --hive-table citystring --map-column-hive id=string
sqoop-import --connect jdbc:mysql://master/sqooptest --username hive -P --table cities --hive-import --hive-table citypart --hive-partition-key part --hive-partition-value 'all'
sqoop-import --connect jdbc:mysql://master/sqooptest --username hive -P --table cities --where 'country="USA"' --hive-import --hive-table citypart --hive-partition-key part --hive-partition-value 'USA'
